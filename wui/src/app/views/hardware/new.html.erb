<div class="dialog_title_small">
  <div class="header">Add New Hardware Pool</div>
  <div>Add a new Hardware Pool to the <%= @parent.name %> pool.
    <%= "Checked #{@resource_type} will be added to the new pool." if @resource_type %>
  </div>
</div>

<form method="POST" action="<%= url_for :action => 'create' %>" id="pool_form" >
<div class="dialog_form">
  <%= render :partial => 'form' %>
</div>
<%= popup_footer("$('#pool_form').submit()", "Create Hardware Pool") %>
</form>
  <script type="text/javascript">
$(function() {
    var hwpooloptions = {
        target:        '<%= url_for :action => 'create' %>',   // target element to update
	dataType:      'json',
        success:       afterNewHwPool  // post-submit callback
    };

    // bind form using 'ajaxForm' 
    $('#pool_form').ajaxForm(hwpooloptions); 
});
function afterNewHwPool(response, status){
    ajax_validation(response, status)
    if (response.success) {
      jQuery(document).trigger('close.facebox');
      // FIXME do we need to reload the tree here
      <%= "$('##{@resource_type}_grid').flexReload()" if @resource_type %>
      //$("#vmpools_grid").flexReload()
    }
}
</script>

<%- content_for :title do -%>
<%= _("New Hardware Pool") %>
<%- end -%>


